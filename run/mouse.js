
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;
;	Mouse emulation:
;
;	#BDE8 - X-pos mouse pointer (0-255)
;	#BDE9 - Y-pos mouse (64-255, 255 = top)
;	#BDEA -  mouse control
;
;	Write #BDEA:
;		- b7	= dis-/enable mouse pointer (0=disable)
;		- b5-6	= not used
;		- b0-4	= mouse pointer selector
;
;	Read #BDEA:
;		- b7	= dis-/enable mouse pointer (0=disable)
;		- b3-6	= not used
;		- b2	= right button  (0=pressed)
;		- b1	= middle button (0=pressed)
;		- b0	= left button   (0=pressed)
;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

var
aKC_Mice =
[
	"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",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZABgDKt/RAAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJElEQVR42mP4//8DAwMa8YEBk/jPj0nw8zMQRWDTi9UOTLcAAGevN1HTSLD9AAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZABgWRwI16wAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJUlEQVR42mNg+P+BgQGd+IBJ/P8AlEEjgMIYBDZ12MzDai8mAAA8TETpXqJzqQAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZABg2fGwVIwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKElEQVR42mPgZwACNOLDByKJ//8/YBBAgEGAzEUj/gMBOsEPMgCVAADjT02VsTLc2gAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACId9XkyGgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAK0lEQVR42mPg////AwMa8R8I0IkPDAz8GMSHD/8xCJAB6ARQNTEEPwMGAQDQpE3RHnMlwQAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACI5yXrWywAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKUlEQVR42mPg////AwMa8Z+BgR+D4AdJoBEMHxgwCH4sBJHq+IE2oREA3cs/wdf2RjAAAAAASUVORK5CYII=",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACMQktN/5gAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKklEQVR42mPg////AwMa8YGB4T86wf//AwbBwM+AhfiAhSBSHQPQclQCAJ4LP8FTvamuAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACMjLQMe8AAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJUlEQVR42mP4DwQMaAQ/A8MHdILhA5BCJ/g/EEdg0YvNDixuAQBlkzfJmqu71wAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACMzMLQOlAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKElEQVR42mP4DwQMaAQ/A8MHdILhA5BCJ/g/EEdg0cvP/+EDOoHFLQDbWTvFiAW0wgAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACQIzv5xdwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKElEQVR42mP4DwQMaAQ/A8MHdILhA5BCJ/g/EEdg0cv///8HdAKLWwBUsj/BCzA0PwAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACQZpE5RhQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAKklEQVR42mP4DwQMaAQ/A8MHdILhA5BCJ/g/EEcAzUQn+P///4BOYHELABo3Q72u20VLAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACUGMF1tMQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAALklEQVR42mXNMQHAQAzDQDEwf5ZikKbjOx7OoxiBwngIa8HsF9E57Br0kj//8AFYVjRFxp5P1wAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACUyEemZhAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAALUlEQVR42mXMMREAMBACQRycf5c4+FBfKLaBIQkXQzE0Nc224lglunywY8HVPKKiO02+kO9HAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACYSAarqjwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAL0lEQVR42mXNsQ0AMAwCQTZg/y1/A8eUJhRHg4TkQQ248eYDptF2k2WD83PJdfEASkY0RQL7y1IAAAAASUVORK5CYII=",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACYluRdPgAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAALElEQVR42mXNMQ0AAAwCQRy8f5d10JKOwHAkLIgdKRhonGShcCn5ObAUvg8ObS47TcN2BNgAAAAASUVORK5CYII=",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACgSnynHAQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAHklEQVR42mPg/8D/gQGNAGJ+Yoj//P+JIog1D4tbAEdUQLH60yLsAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACgpLiIuJQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAHElEQVR42mPg/8D/gQGN+A8ExBBAtfzUJLC4BQBtvU+x9x1BQwAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACg6qpxv+wAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAH0lEQVR42mPg/8D/gQGNAGJ+ooj/H/4TRRBpHha3AACkmE7BBjvuogAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACkYZucfXgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAG0lEQVR42mPg/8D/gQGNAGJ+ahL/gYAYAotbAHJyT7G3HfyJAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACoQQxHErwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJ0lEQVR42mP4DwQMaMQHBiDCIPgZMAksKoHiGMQHTOI/AybxAZMAAM2+NiWyZmxtAAAAAElFTkSuQmCC",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACoj/MGluQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJUlEQVR42mP4wAAEaMR/LMSHD1gIfiwEyAgMgh8LganqPxCgEQBQJTYl44btZgAAAABJRU5ErkJggg==",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACo776097wAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJklEQVR42mNgYGDgZ8Ak/mMS/PyYxAdMgp8Bk/iASWBT+R8I0AgAUe8difuk7LMAAAAASUVORK5CYII=",
	"iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAB3RJTUUH4QkZACsZI9ZNSgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAABdFJOUwBA5thmAAAAJ0lEQVR42m3EQQ0AAAyDQBzUv8s52PZuIOTYjyL8BSNEYIQIrJDiABXnHYnnO+XNAAAAAElFTkSuQmCC"
],

aMS_Mice =
[
	"default", "crosshair", "progress", "move", "ns-resize", "ns-resize", "ew-resize", "ew-resize", "not-allowed", "help", "text", "cell", "copy", "vertical-text", "alias", "text",
	"wait", "wait", "wait", "wait", "pointer", "copy", "help", "alias", "col-resize", "zoom-in", "row-resize", "zoom-out", "nwse-resize", "nesw-resize", "nwse-resize", "nesw-resize"
],
/*
aAtomicMousePointers =
[
	"FF82848482B1CA84",
	"3C468D8D9999723C",
	"FF422418182442FF",
	"669999DDDD999966",
	"E0A0E00000000000",
	"1C222A3A141C141C",
	"FF42241818245AFF",
	"66FFFF9999999966",
	"3C5291919D81423C",
	"F888D85050D888F8",
	"FF42241818247EFF",
	"669999BBBB999966",
	"FF81BFA0A0A0A0E0",
	"3828EE82EE283800",
	"FF422418183C7EFF",
	"6699999999FFFF66",
	"102844C64444447C",
	"40A0A0BEAA81FF7E",
	"E09846316B55291E",
	"FF82848890A0C080",
	"7C444444C6442810",
	"7EFF81ABBEA0A040",
	"0719628CD6AA9478",
	"80C0A090888482FF",
	"08FC828182FC0800",
	"7EC1DEC8D8C8D870",
	"1E29556B314698E0",
	"01030509112141FF",
	"103F4181413F1000",
	"7E837B131B131B0E",
	"7894AAD68C621907",
	"FF41211109050301"
],
*/
aAtomicMousePointers =
[
	"FF82848482B1CA84",
	"E0A0E00000000000",
	"3C5291919D81423C",
	"FF81BFA0A0A0A0E0",
	"102844C64444447C",
	"7C444444C6442810",
	"08FC828182FC0800",
	"103F4181413F1000",
	"3C468D8D9999723C",
	"1C222A3A141C141C",
	"F888D85050D888F8",
	"3828EE82EE283800",
	"40A0A0BEAA81FF7E",
	"7EFF81ABBEA0A040",
	"7EC1DEC8D8C8D870",
	"7E837B131B131B0E",
	"FF422418182442FF",
	"FF42241818245AFF",
	"FF42241818247EFF",
	"FF422418183C7EFF",
	"E09846316B55291E",
	"0719628CD6AA9478",
	"1E29556B314698E0",
	"7894AAD68C621907",
	"669999DDDD999966",
	"66FFFF9999999966",
	"669999BBBB999966",
	"6699999999FFFF66",
	"FF82848890A0C080",
	"80C0A090888482FF",
	"01030509112141FF",
	"FF41211109050301"
];

function fInitMouse()
{
	onEvent(e5, "mousemove",	fMouseMove);
	onEvent(e5, "mousedown",	fMouseDown);
	onEvent(e5, "contextmenu",	fMouseMenu);
	onEvent(e5, "mouseup",		fMouseUp);
}

function fMouseMove(e)
{
	var rect = e5.getBoundingClientRect();
	e = e || window.event;
	nBDE8 = ((e.clientX - rect.left) * 255 / (rect.right  - rect.left) + 0.5 | 0);
	nBDE9 = ((e.clientY - rect.top)  * 191 / (rect.top  - rect.bottom) - 0.5 | 0) + 255;
}

function fMouseDown(e)
{
	e = e || window.event;
	nBDEA &= BYT - (1 << e.button);
	return fEndEvent(e, 2);
}

function fMouseUp(e)
{
	e = e || window.event;
	nBDEA |= 1 << e.button;
	return fEndEvent(e, 2);
}

function fMouseMenu(e)
{
	e = e || window.event;
	return fEndEvent(e, 2);
}

function fMouseCtrl(nVal)
{
	nBDEAw = nVal;
	nBDEA = nBDEAw & 0x80 ? nBDEA | 0x80 : nBDEA & 0x7F;
	fMousePointer(nBDEAw);
}

function fMousePointer(p)
{
	var nKC_Pointer = p & 0x1F, sKC_Pointer = p & 0x80 ? "none" : aMS_Mice [nKC_Pointer];
	if (p < 128) sKC_Pointer = (nBDEAw & 0x20 ? "" : "url(data:image/png;base64," + aKC_Mice [nKC_Pointer] + "),") + sKC_Pointer;
	e5.style.cursor = sKC_Pointer;
}
